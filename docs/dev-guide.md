# 开发者调试指南

开发者模式仅对 `admin` 账号开放。

## 进入开发者模式

1. 使用 `admin` 账号登录
2. 设置页左侧出现“开发者模式”标签页

## 服务器状态监控

- 默认 5 秒轮询一次
- 显示：pid、运行时间、进程 CPU%、进程内存、磁盘使用率（平台支持则显示）、网络 IO（Linux 可读 /proc 时显示）、Top 进程列表
- 数据来源：`GET /api/admin/metrics`

## 前端日志查看器

- 自动捕获 `console.log/info/warn/error/debug`，最多保留 2000 条
- 支持：按级别过滤、时间范围、关键字搜索、导出 JSON、清空
- 捕获逻辑：启动时在前端初始化 logger，对 console 方法做包装

## 后端日志查看模块

- 后端会把 console 日志写入 JSONL 文件：`server/logs/app-YYYY-MM-DD.log`
- 默认保留最近 7 天（启动时清理更老文件，并每 12 小时再次清理）
- 支持：按级别过滤、时间范围、模块精确匹配、关键字搜索、异常堆栈高亮显示、导出 JSON
- 接口：`GET /api/admin/logs`

## 文件接口（命名规则）

- 保存/创建（Upsert）：`PUT /api/files/:id`
- 重名处理：同一父目录（parentId）下，同类型（file/folder）重名时，服务端会将 `name` 自动调整为可读的递增规则，例如 `测试.md`、`测试 (1).md`、`测试 (2).md`，并在响应中返回最终 `name`。

## 常见问题

- 看不到“管理/开发者模式”：确认当前登录用户名为 `admin`
- 后端日志为空：确保后端已启动且产生日志；日志文件位于 `server/logs/`
